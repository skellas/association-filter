<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ixxus.association-filter">

    <!--                -->
    <!-- Result Maps    -->
    <!--                -->

    <resultMap id="result_Association" type="AssociationEntity">
        <result property="sourceNodeRef" column="sourceNodeRef" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="targetNodeRef" column="targetNodeRef" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result property="associationType" column="associationType" jdbcType="VARCHAR" javaType="java.lang.String"/>
    </resultMap>

    <select id="select_AssociationFilterByTypeQuery" parameterType="AssociationFilterQueryParameters"
            resultMap="result_Association">
        SELECT DISTINCT
        SourceNodeRef   as "sourceNodeRef",
        TargetNodeRef   as "targetNodeRef",
        AssociationType as "associationType"
        FROM
        view_associations_by_type
        <if test="filtersSize > 0">
            WHERE
            ${filtersString}
        </if>
        ORDER BY
        AssociationType
        ;
    </select>

</mapper>